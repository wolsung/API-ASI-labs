<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í–µ–±-–∞—É–∫—Ü–∏–æ–Ω –∫–∞—Ä—Ç–∏–Ω</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fafafa;
      margin: 40px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #444;
    }
    form {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    input, button {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #45a049;
    }
    #art-list {
      max-width: 600px;
      margin: auto;
    }
    .art-item {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .art-info {
      flex-grow: 1;
    }
    .bid-btn {
      background-color: #2196F3;
      color: white;
    }
    .end-btn {
      display: block;
      margin: 30px auto;
      background-color: #FF5722;
    }
    #winner {
      text-align: center;
      font-weight: bold;
      margin-top: 20px;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>üé® –í–µ–±-–∞—É–∫—Ü–∏–æ–Ω –∫–∞—Ä—Ç–∏–Ω</h1>

  <form id="add-art-form">
    <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω—ã" required>
    <input type="text" id="author" placeholder="–ê–≤—Ç–æ—Ä" required>
    <input type="number" id="price" placeholder="–ù–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞" required>
    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
  </form>

  <div id="art-list"></div>

  <button id="end-auction" class="end-btn">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–æ—Ä–≥–∏</button>

  <div id="winner"></div>

  <script>
    // ====== –õ–æ–≥–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–∞ ======
    let artworks = JSON.parse(localStorage.getItem('artworks')) || [];

    const artList = document.getElementById('art-list');
    const form = document.getElementById('add-art-form');
    const winnerDiv = document.getElementById('winner');

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
    function saveData() {
      localStorage.setItem('artworks', JSON.stringify(artworks));
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–∏–Ω
    function render() {
      artList.innerHTML = '';
      artworks.forEach((art, index) => {
        const item = document.createElement('div');
        item.className = 'art-item';
        item.innerHTML = `
          <div class="art-info">
            <strong>${art.title}</strong> ‚Äî ${art.author} <br>
            –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: <span id="price-${index}">${art.price}</span> ‚ÇΩ
          </div>
          <button class="bid-btn" onclick="makeBid(${index})">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
        `;
        artList.appendChild(item);
      });
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω—ã
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const title = document.getElementById('title').value.trim();
      const author = document.getElementById('author').value.trim();
      const price = parseFloat(document.getElementById('price').value);
      if (!title || !author || isNaN(price)) return;

      artworks.push({ title, author, price });
      saveData();
      render();
      form.reset();
    });

    // –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É (+10%)
    function makeBid(index) {
      artworks[index].price = Math.round(artworks[index].price * 1.1);
      saveData();
      render();
    }

    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤
    document.getElementById('end-auction').addEventListener('click', () => {
      if (artworks.length === 0) {
        winnerDiv.textContent = '–ù–µ—Ç –∫–∞—Ä—Ç–∏–Ω –¥–ª—è —Ç–æ—Ä–≥–æ–≤.';
        return;
      }
      const max = artworks.reduce((prev, curr) => curr.price > prev.price ? curr : prev);
      winnerDiv.textContent = `üèÜ –ü–æ–±–µ–¥–∏–ª–∞ –∫–∞—Ä—Ç–∏–Ω–∞ "${max.title}" (${max.author}) —Å —Ü–µ–Ω–æ–π ${max.price} ‚ÇΩ!`;
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    render();
  </script>
</body>
</html>